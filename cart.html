<!DOCTYPE HTML>

<html>

    <head>

    	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />

        <meta charset="utf-8">

        <!-- Description, Keywords and Author -->

        <meta name="description" content="">

        <meta name="author" content="">



        <title>Shree Balaji Spareparts</title>

		<link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon">



        <!-- style -->

        <link href="css/style.css" rel="stylesheet" type="text/css">

        <!-- style -->

        <!-- bootstrap -->

        <link href="css/bootstrap.min.css" rel="stylesheet" type="text/css">

        <!-- responsive -->

        <link href="css/responsive.css" rel="stylesheet" type="text/css">

        <!-- font-awesome -->

        <link href="css/fonts.css" rel="stylesheet" type="text/css">

        <link href="css/font-awesome.min.css" rel="stylesheet" type="text/css">

        <!-- font-awesome -->

        <link href="css/effects/normalize.css" rel="stylesheet" type="text/css">

        <link href="css/effects/component.css"  rel="stylesheet" type="text/css" >

        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

        <style>
            /* The Modal (background) */
            .modal {
            display: none; /* Hidden by default */
            position: fixed; /* Stay in place */
            z-index: 2; /* Sit on top */
            padding-top: 100px; /* Location of the box */
            left: 0;
            top: 0;
            width: 100%; /* Full width */
            height: 100%; /* Full height */
            overflow: auto; /* Enable scroll if needed */
            background-color: rgb(226, 224, 224); /* Fallback color */
            background-color: rgba(255, 255, 255, 0.9); /* Black w/ opacity */
            }

            /* Modal Content (image) */
            .modal-content {
            margin: auto;
            display: block;
            width: 80%;
            max-width: 700px;
            }

            /* Caption of Modal Image */
            #caption {
            margin: auto;
            display: block;
            width: 80%;
            max-width: 700px;
            text-align: center;
            color: #ccc;
            padding: 10px 0;
            height: 150px;
            }

            /* Add Animation */
            .modal-content, #caption {
            -webkit-animation-name: zoom;
            -webkit-animation-duration: 0.6s;
            animation-name: zoom;
            animation-duration: 0.6s;
            }

            @-webkit-keyframes zoom {
            from {-webkit-transform:scale(0)}
            to {-webkit-transform:scale(1)}
            }

            @keyframes zoom {
            from {transform:scale(0)}
            to {transform:scale(1)}
            }

            /* The Close Button */
            .close {
            position: absolute;
            top: 15px;
            right: 35px;
            height: 50px;
            width: 50px;
            color: black;
            font-size: 70px;
            font-weight: bold;
            /* transition: 0.3s; */
            }

            .close:hover,
            .close:focus {
            color: black;
            text-decoration: none;
            cursor: pointer;
            }

            /* 100% Image Width on Smaller Screens */
            @media only screen and (max-width: 700px){
            .modal-content {
                width: 100%;
            }
            }
        </style>
	</head>
    <body>


        <div style="height: 100%; width: 100%;">
            <!-- header -->

            <div style="height: 10vh; position: fixed; z-index: 200; top: 0; width: 100%; background: whitesmoke;">

                <header role="header">

                    <div class="container">

                        <!-- logo -->

                            <h1>

                                <a href="index.html" title="Car ac parts"><img style="height: 50px; width: 50px; margin-right: 6px;" src="images/logo.png" title="Shree Balaji Spareparts" alt="Shree Balaji Spareparts"/></a>

                            </h1>

                            <a href="index.html" title="Car ac parts">
                            <div style="font-size: 18px; font-weight: 600; color: darkslategray;">
                                SHREE BALAJI SPAREPARTS KOTKAPURA
                            </div>
                            </a>

                        <!-- logo -->

                        <!-- nav -->

                        <nav role="header-nav" class="navy">

                            <ul>

                                <li class="nav-active"><a href="index.html" title="Home">Home</a></li>

                                <li><a href="electric-ac.html" title="Electric AC">Electric AC</a></li>

                                <li><a href="universal-coils.html" title="Electric AC">Universal Coils</a></li>

                                <li><a href="compressor.html" title="Compressors">Compressors</a></li>

                                <li><a href="refurnished.html" title="R Compressors">R. Compressors</a></li>

                                <li><a href="cooling-coil.html" title="Cooling Coil">Cooling Coil</a></li>

                                <li><a href="condenser.html" title="Condenser">Condenser</a></li>

                                <li><a href="blower-motor.html" title="Blower Motor">Blower Motor</a></li>

                                <li><a href="control-valve.html" title="Control Valve">Control Valve</a></li>

                                <li><a href="expansion-valve.html" title="Expansion Valve">Expansion Valve</a></li>

                                <li><a href="heater.html" title="Heater">Heater</a></li>

                                <!-- <li><a href="cabin-filter.html" title="Cabin Filter">Cabin Filter</a></li>

                                <li><a href="fan-motor.html" title="Compressors">Fan Motor</a></li> -->

                                <li><a href="compressor-parts.html" title="Compressor Parts">Compressor Parts</a></li>

                                <li><a href="sensor.html" title="Switch/ Sensor">Switch/ Sensor</a></li>

                                <li><a href="misc.html" title="Misc">Misc</a></li>

                                <li><a href="contact.html" title="Contact">Contact</a></li>

                            </ul>

                        </nav>

                        <!-- nav -->

                    </div>

                </header>
            </div>

            <!-- header -->

                <!-- main -->
                <main role="main-inner-wrapper" class="container" style="margin-top: 7vh">



                    <div class="row">



                        <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6 ">

                            <article role="pge-title-content" class="blog-header padding-bottom">

                                <header>

                                    <h2><span class="font-size-35">My Cart</span></h2>

                                </header>

                            </article>

                            <!-- <div style="width: 100%;padding-bottom: 20px;padding-top: 5px; display: flex;">
                                <input type="text" id="search-text" style="border-radius: 10px; width: 80%; height: 30px; border: 2px solid gray;">
                                <img src="images/cross-icon.png" style="width: 20%; height: 30px;width: 30px;padding-left: 5px;" onclick="clearText()">
                            </div> -->
                            <div id="cart-summary">
                                <table>
                                  <thead>
                                    <tr>
                                      <th>Item Name</th>
                                      <th>Price</th>
                                      <th>Quantity</th>
                                      <th>Subtotal</th>
                                      <th>Remove</th>
                                    </tr>
                                  </thead>
                                  <tbody class="cart-items">
                                  </tbody>
                                </table>
                                <div id="cart-total">
                                  <p>Total: â‚¹<span id="total"></span></p>
                                  <button id="checkout-button" onclick="checkout()">Checkout</button>
                                  <!-- <div id="container"></div> -->
                                  <!-- <button id="googlePayButton">Pay with Google Pay</button> -->
                                  <!-- <button id="buy-now">Pay with Google Pay</button> -->
                                  <div id="buy-now">
                                  </div>
                                  <button id="continue-shopping-button">Continue Shopping</button>
                                </div>
                              </div>

                              <form id="postcodeForm">
                                <label for="query">Delivery Postcode:</label>
                                <input type="text" id="query" name="query">
                                <button type="submit" onclick="onClickButton()">Check Delivery Price</button>
                                <div id="data-container">
                                    <p id="recommended-company"></p>
                                    <p id="estimated-price"></p>
                                    <p id="estimated-delivery-date"></p>
                                    <p id="estimated-delivery-days"></p>
                                  </div>
                              </form>

                            <ul style="height: auto;" id="grid">
                            </ul>

                        </div>

                    </div>

                    <form action="http://localhost:5000/create_checkout_session" method="GET">
                        <button type="submit">Checkout</button>
                      </form>

                    <button id="cashfreeCheckout" onclick="cashfreeCheckout()">Cashfree Checkout</button>
                </main>
                <!-- main -->

                <!-- footer -->

                <footer role="footer">

                    <!-- logo -->

                        <h1>

                            <a href="index.html" title="Car ac parts"><img style="height: 50px; width: 50px; margin-right: 6px;" src="images/logo.png" title="Shree Balaji Spareparts" alt="Shree Balaji Spareparts"/></a>

                        </h1>

                    <!-- logo -->

                    <!-- nav -->

                    <nav role="footer-nav">

                        <div class="float-container">

                            <div class="float-child">

                        <ul>

                            <li><a href="index.html" title="Home">Home</a></li>

                            <!-- <li><a href="about.html" title="About">About</a></li> -->

                            <li><a href="compressor.html" title="Compressors">Compressors</a></li>

                            <li><a href="cooling-coil.html" title="Cooling Coil">Cooling Coil</a></li>

                            <li><a href="condenser.html" title="Condenser">Condenser</a></li>

                            <li><a href="blower-motor.html" title="Blower Motor">Blower Motor</a></li>

                            <li><a href="control-valve.html" title="Control Valve">Control Valve</a></li>

                            <li><a href="expansion-valve.html" title="Expansion Valve">Expansion Valve</a></li>

                        </ul>

                        </div>

                        <div class="float-child">

                        <ul>

                            <li><a href="heater.html" title="Heater">Heater</a></li>

                            <li><a href="cabin-filter.html" title="Cabin Filter">Cabin Filter</a></li>

                            <li><a href="fan-motor.html" title="Compressors">Fan Motor</a></li>

                            <li><a href="compressor-parts.html" title="Compressor Parts">Compressor Parts</a></li>

                            <li><a href="sensor.html" title="Switch/ Sensor">Switch/ Sensor</a></li>

                            <li><a href="misc.html" title="Misc">Misc</a></li>

                            <li><a href="contact.html" title="Contact">Contact</a></li>

                        </ul>

                        </div>

                        </div>


                    </nav>

                    <!-- nav -->

                    <ul role="social-icons">

                        <li><a href="#"><i class="fa fa-twitter" aria-hidden="true"></i></a></li>

                        <li><a href="#"><i class="fa fa-facebook" aria-hidden="true"></i></a></li>

                        <li><a href="#"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li>

                        <li><a href="#"><i class="fa fa-flickr" aria-hidden="true"></i></a></li>

                    </ul>

                    <p class="copy-right">&copy; 2015  avana LLC.. All rights Resved</p>

                </footer>
                <div style="height: 8vh; position: fixed; bottom: 0;padding: 5px; width: 100%;">
                    <div class="container full-size" style="display: flex;">
                        <div class="call-box">
                            <a href="tel:+916239444069" title="call"><img src="images/call-logo.jpeg" style="height: 50px; width: 50px;" title="call" alt="call"/></a>
                        </div>
                        <div class="whatsapp-box">
                            <a href="https://wa.me/916239444069" title="whatsapp"><img src="images/whatsapp-logo.svg" style="height: 50px; width: 50px;color: green;" title="whatsapp" alt="whatsapp"/></a>
                        </div>
                    </div>
                </div>

                <!-- footer -->

        </div>

        <!-- The Modal -->
        <div id="myModal" class="modal" style="margin-top: 10vh">
            <span class="close" style="color: gray; opacity: 0.8;">&times;</span>
            <img class="modal-content" id="img01" style="width: 150%;">
            <div id="caption"></div>
        </div>

        <!--CashFree-->
        <script src="https://sdk.cashfree.com/js/v3/cashfree.js"></script>

        <!--Google Pay-->

        <script src="js/cart.js" type="text/javascript"></script>

        <!-- <script async
            src="https://pay.google.com/gp/p/js/pay.js"
            onload="onGooglePayLoaded()">
            </script> -->

        <script src="https://pay.google.com/gp/p/js/pay.js"></script>

        <!-- <script src="https://js.braintreegateway.com/web/dropin/1.30.0/js/dropin.min.js"></script> -->

        <script src="https://js.stripe.com/v3/"></script>



        <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->

        <script src="js/jquery.min.js" type="text/javascript"></script>

        <!-- custom -->

		<script src="js/nav.js" type="text/javascript"></script>

        <script src="js/custom.js" type="text/javascript"></script>

        <!-- Include all compiled plugins (below), or include individual files as needed -->

        <script src="js/bootstrap.min.js" type="text/javascript"></script>

        <script src="js/effects/masonry.pkgd.min.js"  type="text/javascript"></script>

		<script src="js/effects/imagesloaded.js"  type="text/javascript"></script>

		<script src="js/effects/classie.js"  type="text/javascript"></script>

		<script src="js/effects/AnimOnScroll.js"  type="text/javascript"></script>

        <script src="js/effects/modernizr.custom.js"></script>

        <!-- jquery.countdown -->

        <script src="js/html5shiv.js" type="text/javascript"></script>

        <script>
            const cartItems = document.querySelector('.cart-items');

            function removeItemByName(name) {
                let cart = JSON.parse(localStorage.getItem('cart')) || [];
                console.log(cart);
                console.log(name);
                const itemIndex = cart.findIndex(item => item.name === name);
                console.log(itemIndex);
                if (itemIndex !== -1) {
                    cart.splice(itemIndex, 1);
                    localStorage.setItem('cart', JSON.stringify(cart));
                }
                displayCart();
            }

            function displayCart() {
                let cart = JSON.parse(localStorage.getItem('cart')) || [];
                console.log(cart);
                cartItems.innerHTML = '';

                cart.forEach(item => {
                    const cartItem = document.createElement("TR");
                    const itemSubtotal = item.price * item.quantity;
                    cartItem.innerHTML = `
                    <td>${item.name} </td> <td> â‚¹${item.price} </td> <td> ${item.quantity} </td> <td class="subtotal"> â‚¹${itemSubtotal} </td> <td><button onclick="removeItemByName('${item.name}')">Remove</button></td>
                    `;
                    cartItems.appendChild(cartItem);
                });

                const subtotalCells = document.querySelectorAll('.subtotal');
                let total = 0;
                subtotalCells.forEach(cell => {
                total += parseFloat(cell.textContent.replace('â‚¹', ''));
                });
                document.getElementById('total').textContent = total.toFixed(2);
            }
            displayCart();

            function checkout() {
                console.log("checkout clicked");
                generate_paymentDataRequest( document.getElementById('total').textContent);
            }

            function onClickButton() {
                const postcodeForm = document.getElementById('postcodeForm');
                postcodeForm.addEventListener('submit', (event) => {
                event.preventDefault();

                const delivery_postcode = document.getElementById('query').value;
                console.log(delivery_postcode);

                fetch('http://localhost:5000/auth')
                    .then(response => response.json())
                    .then(data => console.log(data))
                    .catch(error => console.error(error));

                const endpointUrl = `http://localhost:5000/check_serviceability?pickup_postcode=151204&delivery_postcode=${delivery_postcode}&cod=0&weight=5&length=18&breadth=18&height=8&declared_value=8000&mode=Surface&is_return=0`;

                fetch(endpointUrl)
                    .then(response => response.json())
                    .then(data => {
                        let recommendedCompany;
                        const recommendedCompany_ID = data.data.recommended_courier_company_id;
                        console.log(recommendedCompany_ID);

                        const companies = data.data.available_courier_companies;
                        companies.forEach(company => {
                        if (company.courier_company_id == recommendedCompany_ID) {
                            recommendedCompany = company;
                        }
                        });

                        const recommendedCompanyEl = document.getElementById('recommended-company');
                        recommendedCompanyEl.textContent = `Recommended company: ${recommendedCompany.courier_name}`;

                        const estimatedPriceEl = document.getElementById('estimated-price');
                        estimatedPriceEl.textContent = `Estimated price: â‚¹${recommendedCompany.rto_charges}`;

                        const estimatedDeliveryDateEl = document.getElementById('estimated-delivery-date');
                        estimatedDeliveryDateEl.textContent = `Estimated delivery date: ${recommendedCompany.etd}`;

                        const estimatedDeliveryDaysEl = document.getElementById('estimated-delivery-days');
                        estimatedDeliveryDaysEl.textContent = `Estimated delivery days: ${recommendedCompany.estimated_delivery_days}`;

                        console.log('Recommended company:', recommendedCompany.courier_name);
                        console.log('Estimated price: â‚¹', recommendedCompany.rto_charges);
                        console.log('Estimated delivery date:', recommendedCompany.etd);
                        console.log('Estimated delivery days:', recommendedCompany.estimated_delivery_days);
                    })
                    .catch(error => console.error(error));
                });
            }


            const cashfree = Cashfree({
                mode:"sandbox" //or production
            });




            // const baseRequest = {
            // apiVersion: 2,
            // apiVersionMinor: 0
            // };
            // const allowedCardNetworks = ["AMEX", "DISCOVER", "INTERAC", "JCB", "MASTERCARD", "VISA"];
            // const allowedCardAuthMethods = ["PAN_ONLY", "CRYPTOGRAM_3DS"];
            // const tokenizationSpecification = {
            // type: 'PAYMENT_GATEWAY',
            // parameters: {
            //         gateway: 'stripe',
            //         // gatewayMerchantId: 'pk_test_51NISOmSDkPzV1XKEVmB3kqf8IQlAB8ASSoEWu8104bc3DsBftNOcYRnd3SWt9R1RouU9IZk7zeegN5KqRYNpF5tu00B4BhMKP3',
            //         'stripe:version': '2022-11-15',
            //         'stripe:publishableKey': 'pk_test_51NISOmSDkPzV1XKEVmB3kqf8IQlAB8ASSoEWu8104bc3DsBftNOcYRnd3SWt9R1RouU9IZk7zeegN5KqRYNpF5tu00B4BhMKP3',
            //     },
            // };
            // const baseCardPaymentMethod = {
            //     type: 'CARD',
            //     parameters: {
            //         allowedAuthMethods: allowedCardAuthMethods,
            //         allowedCardNetworks: allowedCardNetworks
            //     }
            // };
            // const cardPaymentMethod = Object.assign(
            //     {},
            //     baseCardPaymentMethod,
            //     {
            //         tokenizationSpecification: tokenizationSpecification
            //     }
            // );
            // let paymentsClient = null;
            // function getGoogleIsReadyToPayRequest() {
            //     return Object.assign(
            //         {},
            //         baseRequest,
            //         {
            //             allowedPaymentMethods: [baseCardPaymentMethod]
            //         }
            //     );
            // }
            // function getGooglePaymentDataRequest() {
            //     const paymentDataRequest = Object.assign({}, baseRequest);
            //     paymentDataRequest.allowedPaymentMethods = [cardPaymentMethod];
            //     paymentDataRequest.transactionInfo = getGoogleTransactionInfo();
            //     paymentDataRequest.merchantInfo = {
            //         // @todo a merchant ID is available for a production environment after approval by Google
            //         // See {@link https://developers.google.com/pay/api/web/guides/test-and-deploy/integration-checklist|Integration checklist}
            //         // merchantId: '12345678901234567890',
            //         merchantId: 'BCR2DN4TULQ7LAZK',
            //         merchantName: 'Shree Balaji Spare Parts',
            //     };
            //     return paymentDataRequest;
            // }
            // function getGooglePaymentsClient() {
            //     if ( paymentsClient === null ) {
            //         paymentsClient = new google.payments.api.PaymentsClient({
            //             environment: 'TEST',
            //             // paymentDataCallbacks: {
            //             //     onPaymentAuthorized: onPaymentAuthorized
            //             // }
            //         });
            //     }
            //     return paymentsClient;
            // }
            // // function onPaymentAuthorized(paymentData) {
            // //     return new Promise(function(resolve, reject){
            // //         // handle the response
            // //         processPayment(paymentData)
            // //         .then(function() {
            // //             resolve({transactionState: 'SUCCESS'});
            // //         })
            // //         .catch(function() {
            // //             resolve({
            // //             transactionState: 'ERROR',
            // //             error: {
            // //                 intent: 'PAYMENT_AUTHORIZATION',
            // //                 message: 'Insufficient funds, try again. Next attempt should work.',
            // //                 reason: 'PAYMENT_DATA_INVALID'
            // //             }
            // //             });
            // //             });
            // //     });
            // // }
            // function onGooglePayLoaded() {
            //     const paymentsClient = getGooglePaymentsClient();
            //     paymentsClient.isReadyToPay(getGoogleIsReadyToPayRequest())
            //         .then(function(response) {
            //             if (response.result) {
            //             addGooglePayButton();
            //             // @todo prefetch payment data to improve performance after confirming site functionality
            //             // prefetchGooglePaymentData();
            //             }
            //         })
            //         .catch(function(err) {
            //             // show error in developer console for debugging
            //             console.error(err);
            //         });
            // }
            // function addGooglePayButton() {
            //     const paymentsClient = getGooglePaymentsClient();
            //     const button =
            //         paymentsClient.createButton({
            //             onClick: onGooglePaymentButtonClicked,
            //             allowedPaymentMethods: [baseCardPaymentMethod]
            //         });
            //     document.getElementById('container').appendChild(button);
            // }
            // function getGoogleTransactionInfo() {
            //     return {
            //         countryCode: 'IN',
            //         currencyCode: 'INR',
            //         totalPriceStatus: 'FINAL',
            //         // set to cart total
            //         totalPrice: '0.00'
            //     };
            // }
            // // function prefetchGooglePaymentData() {
            // //     const paymentDataRequest = getGooglePaymentDataRequest();
            // //     // transactionInfo must be set but does not affect cache
            // //     paymentDataRequest.transactionInfo = {
            // //         totalPriceStatus: 'NOT_CURRENTLY_KNOWN',
            // //         currencyCode: 'USD'
            // //     };
            // //     const paymentsClient = getGooglePaymentsClient();
            // //     paymentsClient.prefetchPaymentData(paymentDataRequest);
            // // }
            // function onGooglePaymentButtonClicked() {
            //     const paymentDataRequest = getGooglePaymentDataRequest();
            //     paymentDataRequest.transactionInfo = getGoogleTransactionInfo();

            //     const paymentsClient = getGooglePaymentsClient();
            //     paymentsClient.loadPaymentData(paymentDataRequest)
            //         .then(function(paymentData) {
            //             // handle the response
            //             processPayment(paymentData);
            //         })
            //         .catch(function(err) {
            //             // show error in developer console for debugging
            //             console.error(err);
            //         });
            // }
            // function processPayment(paymentData) {
            //     // show returned data in developer console for debugging
            //         console.log(paymentData);
            //     // @todo pass payment token to your gateway to process payment
            //     // @note DO NOT save the payment credentials for future transactions,
            //     // unless they're used for merchant-initiated transactions with user
            //     // consent in place.
            //     paymentToken = paymentData.paymentMethodData.tokenizationData.token;
            // }





















    //         // Load the Braintree client SDK
    // braintree.dropin.create({
    //   authorization: 'YOUR_BRAINTREE_CLIENT_TOKEN',
    //   container: '#dropin-container'
    // }, function (err, dropinInstance) {
    //   if (err) {
    //     console.error(err);
    //     return;
    //   }
    //   // Set up the Google Pay button
    //   googlePayClient = dropinInstance.googlePay.createClient({
    //     googlePayVersion: 2,
    //     merchantId: 'BCR2DN4TULQ7LAZK',
    //     transactionInfo: {
    //       totalPriceStatus: 'FINAL',
    //       totalPrice: '10.00', // Replace with the actual payment amount
    //       currencyCode: 'USD' // Replace with the actual currency
    //     }
    //   });
    //   googlePayClient.isReadyToPay()
    //     .then(function (response) {
    //       if (response.result) {
    //         document.getElementById('googlePayButton').addEventListener('click', function () {
    //           googlePayClient.loadPaymentData()
    //             .then(function (paymentData) {
    //               // Send the payment token to your server for processing
    //               fetch('/processPayment', {
    //                 method: 'POST',
    //                 headers: {
    //                   'Content-Type': 'application/json'
    //                 },
    //                 body: JSON.stringify({
    //                   paymentToken: paymentData.paymentMethodData.tokenizationData.token
    //                 })
    //               }).then(function (response) {
    //                 if (response.ok) {
    //                   // Payment success, display confirmation to the user
    //                   console.log('Payment successful!');
    //                 } else {
    //                   // Payment failed, handle the error
    //                   console.error('Payment failed:', response.statusText);
    //                 }
    //               });
    //             })
    //             .catch(function (error) {
    //               console.error('Error loading Google Pay:', error);
    //             });
    //         });
    //       }
    //     })
    //     .catch(function (error) {
    //       console.error('Error checking Google Pay readiness:', error);
    //     });
    // });

        </script>
        <!-- <script async
        src="https://pay.google.com/gp/p/js/pay.js"
        onload="onGooglePayLoaded()"></script> -->
    </body>

</html>
